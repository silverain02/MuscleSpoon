<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exercise</title>
  <style>
    /* styling lable */
.toggle {
    --width: 80px;
    --height: calc(var(--width) / 3);

    position: relative;
    display: inline-block;
    width: var(--width);
    height: var(--height);
    box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.3);
    border-radius: var(--height);
    cursor: pointer;
}

/* hiding checkbox */
.toggle input {
    display: none;
}
/* Creating slider */
.toggle .slider {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: var(--height);
    background-color: #ccc;
    transition: all 0.4s ease-in-out;
}
.toggle .slider::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: calc(var(--height));
    height: calc(var(--height));
    border-radius: calc(var(--height) / 2);
    background-color: #fff;
    box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.3);
    transition: all 0.4s ease-in-out;
}
/* Adding slider effect */
.toggle input:checked + .slider {
    background-color: #2196F3;
}
.toggle input:checked + .slider::before {
    transform: translateX(calc(var(--width) - var(--height)));
}
.toggle .labels {
      position: absolute;
      top: 8px;
      left: 0;
      width: 100%;
      height: 100%;
      font-size: 12px;
      font-family: sans-serif;
      transition: all 0.4s ease-in-out;
    }

    .toggle .labels::after {
      content: attr(data-off);
      position: absolute;
      right: 5px;
      color: #4d4d4d;
      opacity: 1;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);
      transition: all 0.4s ease-in-out;
    }

    .toggle .labels::before {
      content: attr(data-on);
      position: absolute;
      left: 5px;
      color: #ffffff;
      opacity: 0;
      text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.4);
      transition: all 0.4s ease-in-out;
    }

    .toggle input:checked~.labels::after {
      opacity: 0;
    }

    .toggle input:checked~.labels::before {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div class="main_wrapper">
    <div class="date">
        <input type="date">
        <input type="submit" value="선택">
    </div>
    <div class="toggle_wrapper">
        <label class="toggle">
            <input type="checkbox" onclick="location.href='/exercise_week'">
            <span class="slider"></span>
            <span class="labels" data-on="DAY" data-off="WEEK"></span>
        </label>
    </div>
    <div class="part_wrapper">
        <label for="part">part</label>
        <select name="part" id="part">
            <option value="chest">가슴</option>
            <option value="back">등</option>
            <option value="shoulder">어깨</option>
            <option value="lowerBody">하체</option>
            <option value="arm">팔</option>
        </select>
    </div>
    <div class="exerName">
        <label for="exerName">운동명</label>
        <input type="text" id="exerName" placeholder="운동명을 입력하세요.">
    </div>
    <div class="setNum">
        <label for="setNum">세트수</label>
        <input type="number" id="setNum" placeholder="세트수를 입력하세요.">
    </div>
    <div>
        <button type="submit" class="registration" onClick="Exercise()">등록</button>
    </div>
    <div class="checklist_wrapper">
        <h3>CHECK</h3>
    </div>
  </div>

  <script>
    function Exercise(){
      const data = {
        "part": document.getElementById('part').value,
        "exerName": document.getElementById('exerName').value,
        "setNum" : document.getElementById('setNum').value
      }
      console.log(data);

      axios.post('http://localhost:3000/exercise', JSON.stringify(data), { credential: true })
        .then((response) => {
          console.log(response);
          if (response.data === 1) {
            window.localStorage.setItem('part', data.part);
            window.localStorage.setItem('exerName', data.exerName);
            window.localStorage.setItem('setNum', data.setNum);
            alert('등록되었습니다.');
            document.getElementById("checklist_wrapper").innerText = 
              `${data.part} ${data.exerName} ${data.setNum}
              <button class="btn btn-delete">
                <span class="mdi mdi-delete mdi-24px"></span>
                <span class="mdi mdi-delete-empty mdi-24px"></span>
                <span>Delete</span>
              </button>`;
          }
          else {
            alert('등록 정보를 모두 입력해주세요.');
          }
        });
    }
  </script>
</body>